# 视频剪辑编辑器 / Video Clip Editor

## 功能特性 / Features

### ✅ 已实现功能 / Implemented Features

1. **导入媒体素材 / Import Media Assets**
   - 支持导入多个视频文件
   - 支持导入多个音频文件
   - 自动获取媒体时长
   - 素材库管理

2. **时间线编辑 / Timeline Editing**
   - 独立的视频轨道
   - 多条音频轨道（可动态添加）
   - 拖拽素材到轨道
   - 拖拽调整片段位置

3. **视频/音频裁剪 / Trim Video/Audio**
   - 左右拖拽手柄裁剪片段
   - 实时更新片段时长
   - 属性面板精确设置开始/结束时间

4. **轨道缩放 / Track Zoom**
   - 放大/缩小时间线视图
   - 显示当前缩放比例
   - 重置缩放功能

5. **预览播放 / Preview Playback**
   - 实时预览当前时间点的视频
   - 播放/暂停控制
   - 时间轴拖拽跳转
   - 播放头指示器

6. **属性编辑 / Properties Editing**
   - 片段名称编辑
   - 开始/结束时间调整
   - 音频音量控制
   - 删除选中片段

7. **多轨道支持 / Multi-track Support**
   - 1条视频轨道
   - 可添加多条音频轨道
   - 可删除空的音频轨道

## 使用方法 / Usage

### 访问页面 / Access Page
访问路由: `/clip/editor`

### 基本操作流程 / Basic Workflow

1. **导入素材**
   - 点击"导入视频"或"导入音频"按钮
   - 选择本地文件（支持多选）
   - 素材会显示在左侧素材库中

2. **添加到时间线**
   - 从素材库拖拽素材到对应轨道
   - 视频拖到视频轨道，音频拖到音频轨道
   - 松开鼠标放置片段

3. **调整片段**
   - 拖拽片段主体可移动位置
   - 拖拽片段左右边缘可裁剪
   - 点击片段查看/编辑属性

4. **预览**
   - 点击播放按钮预览
   - 拖拽时间轴跳转
   - 中间预览区显示当前画面

5. **导出**
   - 点击"导出视频"按钮
   - （需要集成FFmpeg功能）

## 技术实现 / Technical Implementation

### 核心技术栈
- Vue 3 Composition API
- TypeScript
- Element Plus UI
- HTML5 Video/Audio API

### 关键功能实现

#### 拖拽系统
- 使用原生 HTML5 Drag & Drop API
- 支持素材拖拽到轨道
- 支持片段在轨道内移动

#### 裁剪功能
- 通过鼠标事件监听实现边缘拖拽
- 实时计算并更新片段的 startTime/endTime
- 同步更新片段宽度和位置

#### 时间线缩放
- 基于 pixelsPerSecond 计算
- 动态调整所有片段和标尺的显示

#### 预览同步
- 监听 video.timeupdate 事件
- 根据当前时间查找对应片段
- 自动切换视频源

## 待扩展功能 / Future Enhancements

- [ ] 视频转场效果
- [ ] 音频淡入淡出
- [ ] 字幕轨道
- [ ] 滤镜效果
- [ ] 关键帧动画
- [ ] FFmpeg 集成导出
- [ ] 撤销/重做功能
- [ ] 快捷键支持
- [ ] 波形显示
- [ ] 缩略图预览

## 注意事项 / Notes

1. 当前版本使用 Blob URL 管理媒体文件，仅在浏览器会话中有效
2. 导出功能需要集成 FFmpeg（可参考现有的 VideoTimelineEditor 组件）
3. 大文件可能影响性能，建议优化或添加文件大小限制
4. 跨域视频可能无法加载，需要正确的 CORS 配置
